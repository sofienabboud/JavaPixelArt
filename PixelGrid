package pixel_paint;

import java.util.ArrayDeque;

public class PixelGrid {
	
	//this class will act as the skeleton for the pixels and pixel storage
	
	//use final variables as once the canvas is created it cannot change
	private final int rows;
	private final int columns;
	private final int[][] pixels;
	
	//create a constructor to instantiate and give value to final variables above
	public PixelGrid(int rows, int columns, int backgroundColor) {
	    this.rows = rows;
	    this.columns = columns;
	    this.pixels = new int[rows][columns];
	
	//create a loop to set each pixel to a plain starting background color
	for(int ii = 0; ii < rows; ii++) {
		for(int xx = 0; xx < columns; xx++) {
			pixels[ii][xx] = backgroundColor;}}}
		
	//make rows, columns, and background color accessible by other classes using getter methods
	
	public int getRows() {
	    return rows;}

	public int getColumns() {
	    return columns;}

	public int getPixel(int row, int col) {
	    return pixels[row][col];}
	
	//make the pixel array accessible to change, so that the other classes can change the background color of the pixel
	
	public void setPixel(int row, int col, int color) {
	    pixels[row][col] = color;}
	
	public void floodFill(int startRow, int startCol, int newColor) {
	    // bounds check
	    if (startRow < 0 || startRow >= rows || startCol < 0 || startCol >= columns) {
	        return;
	    }

	    int targetColor = pixels[startRow][startCol];

	    // If the target color is already the new color, nothing to do
	    if (targetColor == newColor) {
	        return;
	    }

	    ArrayDeque<int[]> stack = new ArrayDeque<>();
	    stack.push(new int[] { startRow, startCol });

	    while (!stack.isEmpty()) {
	        int[] cell = stack.pop();
	        int r = cell[0];
	        int c = cell[1];

	        // skip out-of-bounds
	        if (r < 0 || r >= rows || c < 0 || c >= columns) {
	            continue;
	        }

	        // only fill cells that match the original clicked color
	        if (pixels[r][c] != targetColor) {
	            continue;
	        }

	        // fill this cell
	        pixels[r][c] = newColor;

	        // push neighbors (4-direction)
	        stack.push(new int[] { r - 1, c });
	        stack.push(new int[] { r + 1, c });
	        stack.push(new int[] { r, c - 1 });
	        stack.push(new int[] { r, c + 1 });
	    }
	}

}
